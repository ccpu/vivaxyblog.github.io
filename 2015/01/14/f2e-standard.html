<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <link rel="shortcut icon" href="/css/x.png">
    <link type="text/css" rel="stylesheet" href="/css/main.css"/>
    <link type="text/css" rel="stylesheet" href="/css/syntax.css"/>
    <title>前端规范</title>
</head>
<body>
<div class="container">
    <a href="/" class="card hover-left">
	<div class="content">
		<h1>前端规范</h1>
		<div class="date">14 Jan 2015</div>
	</div>
	<div class="icon-arrow-left"></div>
</a>
<div class="card">
	<div class="content">
		<h3 id="section">说明</h3>

<p>前端规范是前端开发团队遵循和约定的代码书写规范。</p>

<p>规范为参考规范，不全是硬性要求，部分硬性约定见下一条书写规范。</p>

<p>提高代码的规范性和可维护性，让所有代码都是有规可循的，并且能够得到沉淀，减少重复劳动。</p>

<h3 id="section-1">目录结构</h3>

<p>单个html</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">.
├── index.html        入口页
├── js/               js
│   ├── lib/          js库
│   └── main.js       js入口
└── css/              css
    ├── lib/          css库
    ├── image/        图片
    └── main.css      主css</code></pre></div>

<p>多个html</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">.
├── html/
│   ├── welcome.html  页面1
│   └── main.html     页面2
├── js/               js
│   ├── lib/          js库
│   └── main.js       js入口
└── css/              css
    ├── lib/          css库
    ├── image/        图片
    └── main.css      主css</code></pre></div>

<h3 id="section-2">文件格式</h3>

<ul>
  <li>文本文件： UTF-8(无BOM)编码</li>
</ul>

<h3 id="section-3">压缩和合并</h3>

<p>js,css,html,png需要合并和压缩</p>

<h3 id="section-4">通用书写格式</h3>

<ul>
  <li>
    <p>css，html，xml，js，json等一律采用4个空格缩进</p>
  </li>
  <li>
    <p><code>{</code> 之间必须包含空格，如：</p>
  </li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.selector</span> <span class="p">{</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li><code>属性名</code>，<code>对象</code> 与之后的 <code>:</code> 之间不包含空格， <code>:</code> 与之后的值之间包含空格，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">margin</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>结尾添加 <code>;</code> ，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">margin</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">};</span></code></pre></div>

<ul>
  <li>多个值 <code>,</code> 前没有空格，后面有空格，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">font-family</span><span class="o">:</span> <span class="nt">Arial</span><span class="o">,</span> <span class="nt">sans-serif</span><span class="o">;</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span></code></pre></div>

<ul>
  <li><code>函数名</code> 与 <code>(</code> 之间有空格，如：</li>
</ul>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>文件名，文件夹名，项目名，html，css样式名中连接单词使用 <code>-</code> 不使用大写字母，不使用数字开头，如：</li>
</ul>

<p><code>dp-share.0.0.1.js</code>，<code>box-list-item-1</code>，<code>mengniu-m-20131230</code>，<code>.top-box</code></p>

<ul>
  <li>js中连接单词使用驼峰式的变量命名方法，不使用数字开头，数字之间采用 <code>_</code> ，如：</li>
</ul>

<p><code>dpShare</code>，<code>boxListItem1</code>，<code>boxListItem1_2</code></p>

<ul>
  <li>
    <p>html，json中的引号采用双引号，js中的引号采用单引号</p>
  </li>
  <li>
    <p>js，css语句结束加 <code>;</code></p>
  </li>
  <li>
    <p><code>[]</code> ， <code>()</code> 中的值，开头没有空格， <code>,</code> 前没有空格， <code>,</code> 后一个空格，最后没有空格，如：</p>
  </li>
</ul>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h3 id="html">html</h3>

<ul>
  <li>
    <p>css文件引用<code>&lt;link type="text/css" rel="stylesheet" href="..."&gt;</code>放置于<code>&lt;/head&gt;</code>前，不使用<code>&lt;style&gt;</code>，便于使用缓存</p>
  </li>
  <li>
    <p>js文件引用<code>&lt;script type="text/javascript" src="..."&gt;&lt;/script&gt;</code>放置于<code>&lt;/body&gt;</code>前，不使用<code>&lt;script&gt;</code>，便于使用缓存</p>
  </li>
  <li>
    <p>css样式附着于<code>class="..."</code>，不使用<code>style="..."</code></p>
  </li>
  <li>
    <p>js操作句柄附着于<code>class="J_xxx"</code></p>
  </li>
  <li>
    <p>绑定的数据使用<code>data-xxx="..."</code></p>
  </li>
  <li>
    <p>文件头采用html5标准<code>&lt;!DOCTYPE html&gt;</code></p>
  </li>
  <li>
    <p>特殊符号采用<a href="http://www.w3school.com.cn/tags/html_ref_entities.html">HTML符号实体</a></p>
  </li>
  <li>
    <p>不用关闭的标签一律不加<code>/</code>，如：<code>&lt;br&gt;</code>，<code>&lt;hr&gt;</code>，<code>&lt;input&gt;</code></p>
  </li>
</ul>

<h3 id="js">js</h3>

<ul>
  <li>
    <p>避免使用全局变量</p>
  </li>
  <li>
    <p>用变量形式申明函数</p>
  </li>
  <li>
    <p>变量在使用前必须通过 <code>var</code> 定义</p>
  </li>
  <li>
    <p>构造函数内部的 <code>this</code> 别名采用 <code>self</code></p>
  </li>
  <li>
    <p>小写开头表示变量，如：<code>topBox</code>，<code>topBoxList</code>，<code>footerCopyright</code></p>
  </li>
  <li>
    <p>大写开头表示构造器函数，如：<code>SuperMBox</code></p>
  </li>
  <li>
    <p>方法内的私有变量加前缀<code>_</code></p>
  </li>
  <li>
    <p>jQuery选择器选择的变量使用$开头</p>
  </li>
  <li>
    <p>js改变样式时：尽量改变Class而不是Style，使用classList代替className</p>
  </li>
  <li>
    <p>缓存DOM选择，每次选择都要计算。</p>
  </li>
  <li>
    <p>缓存列表.length，每次选择都要计算。</p>
  </li>
  <li>
    <p>使用requestAnimationFrame动画代替setTimeout</p>
  </li>
  <li>
    <p>使用Canvas动画 5个元素以内使用css动画，5个以上使用Canvas动画</p>
  </li>
  <li>
    <p>优先使用CSS3动画</p>
  </li>
</ul>

<h3 id="css">css</h3>

<ul>
  <li>在可以使用缩写的情况下，尽量使用属性缩写，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* good */</span>
<span class="nc">.post</span> <span class="p">{</span>
    <span class="k">font</span><span class="o">:</span> <span class="m">12px</span><span class="o">/</span><span class="m">1</span><span class="o">.</span><span class="m">5</span> <span class="n">arial</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* bad */</span>
<span class="nc">.post</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="o">:</span> <span class="n">arial</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span>
    <span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span>
    <span class="k">line-height</span><span class="o">:</span> <span class="m">1</span><span class="o">.</span><span class="m">5</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>属性书写顺序：同一 rule set 下的属性在书写时，应按功能进行分组，并以 Formatting Model（布局方式、位置） &gt; Box Model（尺寸） &gt; Typographic（文本相关） &gt; Visual（视觉效果） 的顺序书写，以提高代码的可读性。</li>
</ul>

<blockquote>
  <p>Formatting Model 相关属性包括：position / top / right / bottom / left / float / display / overflow 等</p>

  <p>Box Model 相关属性包括：border / margin / padding / width / height 等</p>

  <p>Typographic 相关属性包括：font / line-height / text-align / word-wrap 等</p>

  <p>Visual 相关属性包括：background / color / transition / list-style 等</p>

  <p>另外，如果包含 content 属性，应放在最前面。</p>
</blockquote>

<ul>
  <li>url() 函数中的路径不加引号，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">body</span> <span class="p">{</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(bg.png)</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>长度为 0 时须省略单位</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* good */</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* bad */</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">0px</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>颜色值可以缩写时，必须使用缩写形式，如：</li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* good */</span>
<span class="nc">.success</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="m">#aca</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* bad */</span>
<span class="nc">.success</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="m">#aaccaa</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p>颜色值不允许使用命名色值，如：<code>black</code>，<code>green</code></p>
  </li>
  <li>
    <p>浏览器前缀列表按照下面的顺序</p>
  </li>
</ul>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.selected</span> <span class="p">{</span>
    <span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-4px</span><span class="o">,</span> <span class="m">-4px</span><span class="p">);</span>
    <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-4px</span><span class="o">,</span> <span class="m">-4px</span><span class="p">);</span>
    <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-4px</span><span class="o">,</span> <span class="m">-4px</span><span class="p">);</span>
    <span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-4px</span><span class="o">,</span> <span class="m">-4px</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="section-5">注释</h3>

<ul>
  <li>
    <p><code>/* css 注释 */</code></p>
  </li>
  <li>
    <p><code>&lt;!-- html 注释 --&gt;</code></p>
  </li>
  <li>
    <p><code>// js 单行注释</code></p>
  </li>
  <li>
    <p>js 文档</p>
  </li>
</ul>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/**</span>
<span class="cm"> * bla</span>
<span class="cm"> * foo</span>
<span class="cm"> * bar</span>
<span class="cm"> * @file 文件说明</span>
<span class="cm"> * @author 开发者姓名(开发者邮箱)</span>
<span class="cm"> * @since 新建时间</span>
<span class="cm"> * @modified 修改时间</span>
<span class="cm"> * @namespace 命名空间</span>
<span class="cm"> * @class //标记类</span>
<span class="cm"> * @extends 描述继承关系</span>
<span class="cm"> * @param {string} p1 参数1的说明</span>
<span class="cm"> * @return 返回值描述</span>
<span class="cm"> * @inner //标记内部函数，外部无法访问</span>
<span class="cm"> * @override //重写父类中的方法</span>
<span class="cm"> * @event 事件描述</span>
<span class="cm"> * @fires Select#change 广播事件</span>
<span class="cm"> * @const //标记常量</span>
<span class="cm"> * @type {string} //变量类型</span>
<span class="cm"> */</span></code></pre></div>

<p>参见JSDoc</p>

<h3 id="git">git分支</h3>

<ul>
  <li>主要分支，长期存在</li>
</ul>

<ol>
  <li>
    <p>主分支：<code>master</code>，用于发布到ppe和线上</p>
  </li>
  <li>
    <p>开发分支：<code>develop</code>，可交付的代码，用于持续集成的构建，nightly-build</p>
  </li>
</ol>

<p>当开发分支足够稳定时，就将改动合并到<code>master</code>上，并且打上标签，标签名称为发布的版本号</p>

<p>可以用于长期绑定在beta上</p>

<ul>
  <li>辅助分支，生命周期短暂</li>
</ul>

<ol>
  <li>
    <p>特性分支：从开发分支上分出，并最终合并入开发分支。特性分支用于开发一个新特性。以<code>feature-xxx</code>的方式命名</p>
  </li>
  <li>
    <p>紧急修复分支：从主分支上分出，并最终合并入开发分支和主分支。分支以<code>hotfix-xxx</code>的方式命名</p>
  </li>
</ol>

<h3 id="section-6">外部链接中的协议可以省略</h3>

<p><code>&lt;script type="text/javascript" src="//www.google.com/some.js"&gt;&lt;/script&gt;</code></p>

<p><code>background: url(//baidu.com/img/bg.png) no-repeat 0 0;</code></p>

<h3 id="section-7">版本</h3>

<ul>
  <li>版本格式：主版本号.次版本号.修订号</li>
</ul>

<ol>
  <li>
    <p>主版本号：当你做了不兼容的API 修改，</p>
  </li>
  <li>
    <p>次版本号：当你做了向下兼容的功能性新增，</p>
  </li>
  <li>
    <p>修订号：当你做了向下兼容的问题修正。</p>
  </li>
</ol>

<p>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸</p>

<h3 id="section-8">接口</h3>

<ul>
  <li>
    <p>取数据的接口用<code>GET</code>，提交数据的接口使用<code>POST</code></p>
  </li>
  <li>
    <p>需要及时更新的数据，使用<code>GET</code>方法，在参数后添加时间戳<code>&amp;_={timestamp}</code></p>
  </li>
</ul>

<h3 id="section-9">图片</h3>

<ul>
  <li>
    <p>避免重设图片大小，重设图片大小是指在html、css、js，多次重设图片大小会引发图片的多次重绘，影响性能</p>
  </li>
  <li>
    <p>图片尽量避免使用DataURL，DataURL图片没有使用图片的压缩算法文件会变大，并且要解码后再渲染，加载慢耗时长</p>
  </li>
  <li>
    <p>使用css,svg,iconfont代替图片</p>
  </li>
  <li>
    <p>移动端图片宽度不大于640</p>
  </li>
</ul>

<h3 id="section-10">性能</h3>

<ol>
  <li>
    <p>移动端三秒种渲染完成首屏，首屏加载3秒完成或使用Loading，基于联通3G网络平均338KB/s(2.71Mb/s），所以首屏资源不应超过1014KB</p>
  </li>
  <li>
    <p>移动端减少HTTP请求，首次加载同时请求数不能超过4个。手机浏览器同时响应请求为4个请求（Android支持4个，iOS 5后可支持6个）。</p>
  </li>
  <li>
    <p>使用缓存。可以减少向服务器的请求数，节省加载时间，所以所有静态资源都要在服务器端设置缓存，并且尽量使用长Cache（长Cache资源的更新可使用时间戳）</p>
  </li>
  <li>
    <p>异步加载第三方资源：第三方资源不可控会影响页面的加载和显示，因此要异步加载第三方资源。</p>
  </li>
</ol>

<h2 id="section-11">参考</h2>

<ul>
  <li>
    <p><a href="http://zh.wikipedia.org/wiki/%E5%8C%88%E7%89%99%E5%88%A9%E5%91%BD%E5%90%8D%E6%B3%95">匈牙利命名法</a></p>
  </li>
  <li>
    <p><a href="http://front-end-standards.com/">前端规范</a></p>
  </li>
  <li>
    <p><a href="http://segmentfault.com/blog/jslite/1190000002460968">css编码规范</a></p>
  </li>
  <li>
    <p><a href="http://segmentfault.com/blog/jslite/1190000002460897">JavaScript编码规范 1</a></p>
  </li>
  <li>
    <p><a href="http://segmentfault.com/blog/jslite/1190000002460944">JavaScript编码规范 2</a></p>
  </li>
  <li>
    <p><a href="http://segmentfault.com/blog/news/1190000000410316">最流行的JavaScript代码规范</a></p>
  </li>
  <li>
    <p><a href="http://semver.org/lang/zh-CN/">语义化版本2.0.0</a></p>
  </li>
  <li>
    <p><a href="http://usejsdoc.org/index.html">JSDoc</a></p>
  </li>
  <li>
    <p><a href="http://isux.tencent.com/h5-performance.html">移动H5前端性能优化指南</a></p>
  </li>
  <li>
    <p><a href="http://sideeffect.kr/popularconvention#javascript">Popular Coding Convention on Github</a></p>
  </li>
  <li>
    <p><a href="http://zh.wikipedia.org/wiki/%E9%A7%9D%E5%B3%B0%E5%BC%8F%E5%A4%A7%E5%B0%8F%E5%AF%AB">驼峰式</a></p>
  </li>
</ul>

	</div>
</div>
<div class="card">
	<!-- 多说 start -->
	<div class="ds-thread" data-title="前端规范" data-url=""></div>
	<script type="text/javascript" charset="utf-8" src="/js/duoshuo/duoshuo.js"></script>
	<!-- 多说  end  -->
</div>

    <a href="javascript:document.body.scrollIntoView(true);" class="card hover-top">
        <div class="content">
            <div class="date">© Copyright 2014 by vivaxy - Powered by Jekyll</div>
        </div>
    </a>
</div>
</body>
<script type="text/javascript" charset="utf-8" src="/js/analysis/ba.js"></script>
</html>